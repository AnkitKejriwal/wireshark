# $Id$

DISSECTOR_FILES=packet-h248.c packet-h248.h

all: generate_dissector

generate_dissector: $(DISSECTOR_FILES)

$(DISSECTOR_FILES): ../../tools/asn2wrs.py h248v3.asn packet-h248-template.c packet-h248-template.h h248.cnf 
	python ../../tools/asn2wrs.py -b -e -p h248 -c h248.cnf -s packet-h248-template h248v3.asn

clean:
	rm -f parsetab.py $(DISSECTOR_FILES) *-fn.c *-ett.c *-hf.c copy_files

copy_files: generate_dissector
	cp $(DISSECTOR_FILES) ../../epan/dissectors
	touch copy_files

compile: copy_files
	( cd ../../epan/dissectors && make packet-h248.o )
